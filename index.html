<!doctype html>
<html>
    <head>
        <!-- Google tag (gtag.js) -->
        <script
            async
            src="https://www.googletagmanager.com/gtag/js?id=G-HTQY7L5NTF"
        ></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag("js", new Date());

            gtag("config", "G-HTQY7L5NTF");
        </script>
        <link
            rel="apple-touch-icon"
            sizes="180x180"
            href="favicons/apple-touch-icon.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="32x32"
            href="favicons/favicon-32x32.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="16x16"
            href="favicons/favicon-16x16.png"
        />
        <link rel="manifest" href="favicons/site.webmanifest" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
        />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap"
            rel="stylesheet"
        />
        <link
            href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
            rel="stylesheet"
        />
        <meta charset="UTF-8" />

        <title>Spectrum Chart</title>
        <style>
            body {
                margin: 0;
                overflow: hidden;
                touch-action: none;
                font-family: "Quicksand", sans-serif;
            }
            #canvas {
                touch-action: none;
                width: 100vw;
                height: 100vh;
                display: block;
            }
            .menu {
                position: fixed;
                top: 20px;
                left: 20px;
                display: flex;
                flex-direction: column;
                gap: 10px;
                z-index: 3;
                padding-left: env(safe-area-inset-left);
                padding-bottom: env(safe-area-inset-bottom);
            }
            .dropdown-button {
                position: relative;
            }
            .button {
                width: 40px;
                height: 40px;
                border-radius: 6px;
                border: none;
                background-color: rgba(255, 255, 255, 1);
                cursor: pointer;
                font-size: 24px;
                color: #000;
                display: flex;
                align-items: center;
                justify-content: center;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
                transition: background-color 0.1s;
                -webkit-appearance: none;
                touch-action: manipulation;
                padding: 0;
            }
            .button:hover {
                background-color: #f0f0f0;
            }
            .button:active {
                background-color: #d0e7fe;
                transform: translateY(1px);
            }

            .dropdown-menu {
                display: none;
                position: absolute;
                left: calc(100% + 10px);
                top: 0;
                background-color: white;
                width: 300px;
                max-width: calc(100vw - 100px + env(safe-area-inset-right));
                max-height: calc(100dvh - 50px - env(safe-area-inset-bottom));
                overflow-y: auto;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
                border-radius: 6px;
                padding: 6px;
            }

            .dropdown-menu label {
                display: block;
                padding: 6px;
                cursor: pointer;
            }

            .dropdown-menu label:hover {
                background-color: #f0f0f0;
                border-radius: 6px;
            }

            .dropdown-menu h4 {
                margin: 5px 0;
                color: #666;
                font-weight: 700;
                font-size: 12px;
                padding: 0 5px;
            }

            .dropdown-menu input[type="button"] {
                -webkit-appearance: none;
                -moz-appearance: none;
                appearance: none;
                background: none;
                border: none;
                border-radius: 6px;
                width: 100%;
                text-align: left;
                cursor: pointer;
                color: #000000;
                font-family: inherit;
                font-size: inherit;
            }
        </style>
    </head>
    <body>
        <canvas id="canvas"></canvas>
        <div class="menu">
            <div class="dropdown-button">
                <button class="button">
                    <i class="bx bx-menu"></i>
                </button>
                <div class="dropdown-menu">
                    <h4>Wi-Fi</h4>
                    <label
                        ><input type="checkbox" id="wifi-visibility" checked />
                        Wi-Fi
                    </label>
                    <label>
                        <input
                            type="checkbox"
                            id="wifi-20mhz-visibility"
                            checked
                        />
                        20 MHz channels
                    </label>
                    <label>
                        <input type="checkbox" id="wifi-40mhz-visibility" /> 40
                        MHz channels
                    </label>
                    <label>
                        <input type="checkbox" id="wifi-80mhz-visibility" /> 80
                        MHz channels
                    </label>
                    <label>
                        <input type="checkbox" id="wifi-160mhz-visibility" />
                        160 MHz channels
                    </label>
                    <label>
                        <input type="checkbox" id="wifi-320mhz-visibility" />
                        320 MHz channels
                    </label>
                    <label>
                        <input
                            type="checkbox"
                            id="wifi-overlapping-visibility"
                        />
                        2.4 GHz overlapping channels</label
                    >
                    <label
                        ><input
                            type="checkbox"
                            id="20-mhz-subcarrier-visibility"
                            checked
                        />
                        20 MHz subcarriers</label
                    >
                    <h4>Wi-Fi (802.11ah)</h4>
                    <label>
                        <input
                            type="checkbox"
                            id="wifi-1mhz-visibility"
                            checked
                        />
                        1 MHz channels
                    </label>
                    <label>
                        <input type="checkbox" id="wifi-2mhz-visibility" /> 2
                        MHz channels
                    </label>
                    <label>
                        <input type="checkbox" id="wifi-4mhz-visibility" /> 4
                        MHz channels
                    </label>
                    <label>
                        <input type="checkbox" id="wifi-8mhz-visibility" /> 8
                        MHz channels
                    </label>
                    <label>
                        <input type="checkbox" id="wifi-16mhz-visibility" /> 16
                        MHz channels
                    </label>
                    <h4>Bluetooth</h4>
                    <label
                        ><input
                            type="checkbox"
                            id="bluetooth-visibility"
                            checked
                        />
                        Bluetooth</label
                    >
                    <label>
                        <input
                            type="radio"
                            name="bluetooth-mode-select"
                            value="Classic"
                        />
                        Classic
                    </label>
                    <label>
                        <input
                            type="radio"
                            name="bluetooth-mode-select"
                            value="Low Energy"
                            checked
                        />
                        Low Energy
                    </label>
                    <h4>Zigbee</h4>
                    <label
                        ><input type="checkbox" id="zigbee-visibility" />
                        Zigbee</label
                    >
                    <h4>LoRa</h4>
                    <label
                        ><input type="checkbox" id="lora-visibility" />
                        LoRa</label
                    >
                    <label
                        ><input type="checkbox" id="lora-125-visibility" /> 125
                        KHz channels
                    </label>
                    <label
                        ><input type="checkbox" id="lora-500-visibility" /> 500
                        KHz channels
                    </label>
                    <h4>Band Labels</h4>
                    <label>
                        <input
                            type="checkbox"
                            id="fcc-band-visibility"
                            checked
                        />
                        FCC
                    </label>
                    <label>
                        <input
                            type="checkbox"
                            id="etsi-band-visibility"
                            checked
                        />
                        ETSI
                    </label>
                    <label>
                        <input
                            type="checkbox"
                            id="gsm-cellular-band-visibility"
                        />
                        GSM Cellular
                    </label>
                    <label>
                        <input
                            type="checkbox"
                            id="LTE-cellular-band-visibility"
                        />
                        LTE Cellular
                    </label>
                    <label>
                        <input
                            type="checkbox"
                            id="5G-NR-cellular-band-visibility"
                        />
                        5G NR Cellular
                    </label>
                    <h4>General</h4>
                    <label>
                        Height:
                        <input
                            type="range"
                            id="height-slider"
                            min="20"
                            max="400"
                            value="100"
                        />
                    </label>
                </div>
            </div>
            <div class="dropdown-button">
                <button class="button" id="domain">
                    <i class="bx bx-globe"></i>
                </button>
                <div class="dropdown-menu">
                    <h4>Regulatory Domains</h4>
                    <label>
                        <input
                            type="checkbox"
                            id="ww-domain-visibility"
                            checked
                        />
                        🌍 Show Worldwide (harmonized)
                    </label>
                    <label>
                        <input
                            type="checkbox"
                            id="us-domain-visibility"
                            checked
                        />
                        🇺🇸 Show US
                    </label>
                    <label>
                        <input
                            type="checkbox"
                            id="eu-domain-visibility"
                            checked
                        />
                        🇪🇺 Show EU
                    </label>
                    <label>
                        <input
                            type="checkbox"
                            id="au-domain-visibility"
                            checked
                        />
                        🇦🇺 Show AU
                    </label>
                    <label>
                        <input
                            type="checkbox"
                            id="jp-domain-visibility"
                            checked
                        />
                        🇯🇵 Show JP
                    </label>
                </div>
            </div>
            <div class="dropdown-button">
                <button class="button" id="shortcuts">
                    <i class="bx bx-star"></i>
                </button>
                <div class="dropdown-menu">
                    <h4>Shortcuts</h4>
                    <label>
                        <input
                            type="button"
                            value="900 MHz"
                            id="900-MHz-shortcut"
                    /></label>
                    <label
                        ><input
                            type="button"
                            value="2.4 GHz"
                            id="2400-MHz-shortcut"
                    /></label>
                    <label
                        ><input
                            type="button"
                            value="5 GHz"
                            id="5000-MHz-shortcut"
                    /></label>
                    <label
                        ><input
                            type="button"
                            value="6 GHz"
                            id="6000-MHz-shortcut"
                    /></label>
                    <label
                        ><input
                            type="button"
                            value="Entire spectrum"
                            id="full-spectrum-shortcut"
                    /></label>
                </div>
            </div>
            <button class="button" id="export">
                <i class="bx bx-download"></i>
            </button>
            <button class="button" id="zoom-in">
                <i class="bx bx-zoom-in"></i>
            </button>
            <button class="button" id="zoom-out">
                <i class="bx bx-zoom-out"></i>
            </button>
        </div>
        <script>
            let canvas = document.querySelector("#canvas");
            let context = canvas.getContext("2d");

            const DEBUG = false;

            const minZoom = 0.06;
            const maxZoom = 120;

            // Setting state variables
            let showWifi = true;
            let showWifiChannels = true;
            let showOverlapping = false;
            let show20MHzSubcarriers = true;
            let show1MHz = true;
            let show2MHz = false;
            let show4MHz = false;
            let show8MHz = false;
            let show16MHz = false;
            let show20MHz = true;
            let show40MHz = false;
            let show80MHz = false;
            let show160MHz = false;
            let show320MHz = false;
            let showBluetooth = true;
            let showBluetoothChannels = false;
            let bluetoothMode = "Low Energy";
            let showZigbee = false;
            let showZigbeeChannels = false;
            let showLoRa = true;
            let showLoRa125 = false;
            let showLoRa500 = false;

            // Bands
            let showBandFCC = true;
            let showBandETSI = true;
            let showBandCellularGSM = false;
            let showBandCellular5GNR = false;
            let showBandCellularLTE = false;

            // Domains
            let showWWDomain = true;
            let showUSDomain = true;
            let showEUDomain = true;
            let showJPDomain = true;
            let showAUDomain = true;

            // Other variables
            let offset = { x: 0, y: 0 };
            let scale = 8;
            let isDragging = false;
            let lastPosition = { x: 0, y: 0 };
            let lastPinchDistance = null;
            let lastScale = scale; // For scale tuning purposes
            const heightSlider = document.getElementById("height-slider");

            // Movement variables (incomplete, there are some above)
            let scrollDirection = null;
            let scrollThreshold = 2;
            let lastWheelTime = Date.now();
            const wheelTimeout = 200; // ms to reset direction lock

            // Touch coasting/momentum variables
            let velocity = 0;
            let lastTimestamp = 0;
            let animationFrameId = null;
            let isCoasting = false;

            // Visual settings
            const chartSettings = {
                spectralMaskHeight: 100, // Default signature height
                baselineOffset: 20, // Offsets the text below the baseline
                textSize: 12,
            };

            // Rowless labels
            const channelLabelPositions = [];
            const bandLabelPositions = [];
            const BASE_OFFSET = -56; // Down from center
            const BAND_LABEL_OFFSET = 56; // Up from the top of the spectral masks
            const LABEL_HEIGHT = 28; // Height of labels
            const ROW_HEIGHT = LABEL_HEIGHT + 6;

            const style = {
                wifi: {
                    primaryColor: "rgba(245, 216, 9)",
                    secondaryColor: "rgba(245, 216, 9, 0.2)",
                    textColor: "#000000",
                },
                wifi1: {
                    primaryColor: "rgb(0, 153, 51)",
                    secondaryColor: "rgb(0, 153, 51, 0.2)",
                    textColor: "#FFFFFF",
                },
                bluetooth: {
                    primaryColor: "rgba(20, 134, 252)",
                    secondaryColor: "rgba(20, 134, 252, 0.2)",
                    textColor: "#FFFFFF",
                },
                zigbee: {
                    primaryColor: "rgba(239, 52, 83)",
                    secondaryColor: "rgba(239, 52, 83, 0.2)",
                    textColor: "#FFFFFF",
                },
                lora: {
                    primaryColor: "rgba(0, 159, 227)",
                    secondaryColor: "rgba(0, 159, 227, 0.2)",
                    textColor: "#FFFFFF",
                },
                fcc: {
                    primaryColor: "#F2F2F2",
                    textColor: "#FFFFFF",
                },
                etsi: {
                    primaryColor: "#5e5e5e",
                    textColor: "#FFFFFF",
                },
                gsm: {
                    primaryColor: "#2b2b2b",
                    textColor: "#FFFFFF",
                },
                nr: {
                    primaryColor: "#2b2b2b",
                    textColor: "#FFFFFF",
                },
                lte: {
                    primaryColor: "#141414",
                    textColor: "#FFFFFF",
                },
            };

            const zoomTiers = {
                lowest: {
                    threshold: 0.25,
                    frequency: {
                        step: 1000,
                        minorSteps: 250,
                        showAsGHz: true,
                        ghzDecimals: 0,
                    },
                },
                low: {
                    threshold: 1,
                    frequency: {
                        step: 500,
                        minorSteps: 100,
                        showAsGHz: true,
                        ghzDecimals: 1,
                    },
                },
                medium: {
                    threshold: 2,
                    frequency: {
                        step: 100,
                        minorSteps: 50,
                        showAsGHz: true,
                        ghzDecimals: 1,
                    },
                },
                high: {
                    threshold: 10,
                    frequency: {
                        step: 20,
                        minorSteps: 10,
                        showAsGHz: false,
                        ghzDecimals: 2,
                    },
                },
                highest: {
                    threshold: 20,
                    frequency: {
                        step: 10,
                        minorSteps: 1,
                        showAsGHz: false,
                        ghzDecimals: 3,
                    },
                },
                infinity: {
                    threshold: Infinity,
                    frequency: {
                        step: 2,
                        minorSteps: 1,
                        showAsGHz: false,
                        ghzDecimals: 0,
                    },
                },
            };

            const bands = {
                FCC: [
                    {
                        name: "VHF",
                        start: 30,
                        stop: 300,
                    },
                    {
                        name: "900 MHz",
                        start: 902,
                        stop: 928,
                    },
                    {
                        name: "2.4 GHz",
                        start: 2400,
                        stop: 2500,
                    },
                    { name: "CBRS", start: 3550, stop: 3700 },
                    {
                        name: "UNII-1",
                        start: 5150,
                        stop: 5250,
                    },
                    { name: "UNII-2", start: 5250, stop: 5350 },
                    { name: "UNII-2e", start: 5470, stop: 5725 },
                    { name: "UNII-3", start: 5725, stop: 5850 },
                    { name: "UNII-4", start: 5850, stop: 5925 },
                    { name: "UNII-5", start: 5925, stop: 6425 },
                    { name: "UNII-6", start: 6425, stop: 6525 },
                    { name: "UNII-7", start: 6525, stop: 6875 },
                    { name: "UNII-8", start: 6875, stop: 7125 },
                ],
                ETSI: [
                    { name: "EU863-870", start: 863, stop: 870 },
                    // From https://www.thethingsnetwork.org/docs/lorawan/regional-parameters/eu868/

                    { name: "Band A", start: 5150, stop: 5350 },
                    { name: "Band B", start: 5470, stop: 5725 },
                    { name: "Band C", start: 5725, stop: 5875 },
                ],
                "GSM Cellular": [
                    { name: "T-GSM-380 Uplink", start: 380.2, stop: 389.8 }, // Mobile to base
                    { name: "T-GSM-380 Downlink", start: 390.2, stop: 399.8 }, // Base to mobile

                    { name: "T-GSM-410 Uplink", start: 410.2, stop: 419.8 },
                    { name: "T-GSM-410 Downlink", start: 420.2, stop: 429.8 },

                    { name: "GSM-450 Uplink", start: 450.6, stop: 457.6 },
                    { name: "GSM-450 Downlink", start: 460.6, stop: 467.6 },

                    { name: "GSM-480 Uplink", start: 479.0, stop: 486.0 },
                    { name: "GSM-480 Downlink", start: 489.0, stop: 496.0 },

                    { name: "GSM-710 Uplink", start: 698.2, stop: 716.2 },
                    { name: "GSM-710 Downlink", start: 728.2, stop: 746.2 },

                    { name: "GSM-750 Uplink", start: 777.2, stop: 792.2 },
                    { name: "GSM-750 Downlink", start: 747.2, stop: 762.2 },

                    { name: "T-GSM-810 Uplink", start: 806.2, stop: 821.2 },
                    { name: "T-GSM-810 Downlink", start: 851.2, stop: 866.2 },

                    { name: "GSM-850 Uplink", start: 824.2, stop: 848.8 },
                    { name: "GSM-850 Downlink", start: 869.2, stop: 893.8 },

                    { name: "E-GSM-900 Uplink", start: 880, stop: 915 },
                    { name: "E-GSM-900 Downlink", start: 925, stop: 960 },

                    { name: "R-GSM-900 Uplink", start: 876, stop: 876 },
                    { name: "R-GSM-900 Downlink", start: 921, stop: 960 },

                    { name: "T-GSM-900 Uplink", start: 870.4, stop: 876 },
                    { name: "T-GSM-900 Downlink", start: 915.4, stop: 921 },

                    { name: "DCS-1800 Uplink", start: 1710.2, stop: 1784.8 },
                    { name: "DCS-1800 Downlink", start: 1805.2, stop: 1879.8 },

                    { name: "PCS-1900 Uplink", start: 1850.2, stop: 1909.8 },
                    { name: "PCS-1900 Downlink", start: 1930.2, stop: 1989.8 },

                    // There are more bands to add: https://en.wikipedia.org/wiki/GSM_frequency_bands
                ],
                "5G NR Cellular": [
                    { name: "n1 Uplink", start: 1920, stop: 1980 },
                    { name: "n1 Downlink", start: 2110, stop: 2170 },
                    { name: "n2 Uplink", start: 1850, stop: 1910 },
                    { name: "n2 Downlink", start: 1930, stop: 1990 },
                    { name: "n3 Uplink", start: 1710, stop: 1785 },
                    { name: "n3 Downlink", start: 1805, stop: 1880 },
                    { name: "n5 Uplink", start: 824, stop: 849 },
                    { name: "n5 Downlink", start: 869, stop: 894 },
                    { name: "n7 Uplink", start: 2500, stop: 2570 },
                    { name: "n7 Downlink", start: 2620, stop: 2690 },
                    { name: "n8 Uplink", start: 880, stop: 915 },
                    { name: "n8 Downlink", start: 925, stop: 960 },
                    { name: "n12 Uplink", start: 699, stop: 716 },
                    { name: "n12 Downlink", start: 729, stop: 746 },
                    { name: "n13 Uplink", start: 777, stop: 787 },
                    { name: "n13 Downlink", start: 746, stop: 756 },
                    { name: "n14 Uplink", start: 788, stop: 798 },
                    { name: "n14 Downlink", start: 758, stop: 768 },
                    { name: "n18 Uplink", start: 815, stop: 830 },
                    { name: "n18 Downlink", start: 860, stop: 875 },
                    { name: "n20 Uplink", start: 832, stop: 862 },
                    { name: "n20 Downlink", start: 791, stop: 821 },
                    { name: "n24 Uplink", start: 1626.5, stop: 1660.5 },
                    { name: "n24 Downlink", start: 1525, stop: 1559 },
                    { name: "n25 Uplink", start: 1850, stop: 1915 },
                    { name: "n25 Downlink", start: 1930, stop: 1995 },
                    { name: "n26 Uplink", start: 814, stop: 849 },
                    { name: "n26 Downlink", start: 859, stop: 894 },
                    { name: "n28 Uplink", start: 703, stop: 748 },
                    { name: "n28 Downlink", start: 758, stop: 803 },
                    { name: "n29 Downlink", start: 717, stop: 728 },
                    { name: "n30 Uplink", start: 2305, stop: 2315 },
                    { name: "n30 Downlink", start: 2350, stop: 2360 },
                    { name: "n31 Uplink", start: 452.5, stop: 457.5 },
                    { name: "n31 Downlink", start: 462.5, stop: 467.5 },
                    { name: "n34", start: 2010, stop: 2025 },
                    { name: "n38", start: 2570, stop: 2620 },
                    { name: "n39", start: 1880, stop: 1920 },
                    { name: "n40", start: 2300, stop: 2400 },
                    { name: "n41", start: 2496, stop: 2690 },
                    { name: "n46", start: 5150, stop: 5925 },
                    { name: "n47", start: 5855, stop: 5925 },
                    { name: "n48", start: 3550, stop: 3700 },
                    { name: "n50", start: 1432, stop: 1517 },
                    { name: "n51", start: 1427, stop: 1432 },
                    { name: "n53", start: 2483.5, stop: 2495 },
                    { name: "n54", start: 1670, stop: 1675 },
                    { name: "n65 Uplink", start: 1920, stop: 2010 },
                    { name: "n65 Downlink", start: 2110, stop: 2200 },
                    { name: "n66 Uplink", start: 1710, stop: 1780 },
                    { name: "n66 Downlink", start: 2110, stop: 2200 },
                    { name: "n67 Downlink", start: 738, stop: 758 },
                    { name: "n70 Uplink", start: 1695, stop: 1710 },
                    { name: "n70 Downlink", start: 1995, stop: 2020 },
                    { name: "n71 Uplink", start: 663, stop: 698 },
                    { name: "n71 Downlink", start: 617, stop: 652 },
                    { name: "n72 Uplink", start: 451, stop: 456 },
                    { name: "n72 Downlink", start: 461, stop: 466 },
                    { name: "n74 Uplink", start: 1427, stop: 1470 },
                    { name: "n74 Downlink", start: 1475, stop: 1518 },
                    { name: "n75 Downlink", start: 1432, stop: 1517 },
                    { name: "n76 Downlink", start: 1427, stop: 1432 },
                    { name: "n77", start: 3300, stop: 4200 },
                    { name: "n78", start: 3300, stop: 3800 },
                    { name: "n79", start: 4400, stop: 5000 },
                    { name: "n80 Uplink", start: 1710, stop: 1785 },
                    { name: "n81 Uplink", start: 880, stop: 915 },
                    { name: "n82 Uplink", start: 832, stop: 862 },
                    { name: "n83 Uplink", start: 703, stop: 748 },
                    { name: "n84 Uplink", start: 1920, stop: 1980 },
                    { name: "n85 Uplink", start: 698, stop: 716 },
                    { name: "n85 Downlink", start: 728, stop: 746 },
                    { name: "n86 Uplink", start: 1710, stop: 1780 },
                    { name: "n89 Uplink", start: 824, stop: 849 },
                    { name: "n90", start: 2496, stop: 2690 },
                    { name: "n91 Uplink", start: 832, stop: 862 },
                    { name: "n91 Downlink", start: 1427, stop: 1432 },
                    { name: "n92 Uplink", start: 832, stop: 862 },
                    { name: "n92 Downlink", start: 1432, stop: 1517 },
                    { name: "n93 Uplink", start: 880, stop: 915 },
                    { name: "n93 Downlink", start: 1427, stop: 1432 },
                    { name: "n94 Uplink", start: 880, stop: 915 },
                    { name: "n94 Downlink", start: 1432, stop: 1517 },
                    { name: "n95", start: 2010, stop: 2025 },
                    { name: "n96", start: 5925, stop: 7125 },
                    { name: "n97", start: 2300, stop: 2400 },
                    { name: "n98", start: 1880, stop: 1920 },
                    { name: "n99 Uplink", start: 1626.5, stop: 1660.5 },
                    { name: "n100 Uplink", start: 874.4, stop: 880 },
                    { name: "n100 Downlink", start: 919.4, stop: 925 },
                    { name: "n101", start: 1900, stop: 1910 },
                    { name: "n102", start: 5925, stop: 6425 },
                    { name: "n104", start: 6425, stop: 7125 },
                    { name: "n105 Uplink", start: 663, stop: 703 },
                    { name: "n105 Downlink", start: 612, stop: 652 },
                    { name: "n106 Uplink", start: 896, stop: 901 },
                    { name: "n106 Downlink", start: 935, stop: 940 },
                    { name: "n109 Uplink", start: 703, stop: 733 },
                    { name: "n109 Downlink", start: 1432, stop: 1517 },
                ],
                "LTE Cellular": [
                    { name: "1 Uplink", start: 1920, stop: 1980 },
                    { name: "1 Downlink", start: 2110, stop: 2170 },
                    { name: "2 Uplink", start: 1850, stop: 1910 },
                    { name: "2 Downlink", start: 1930, stop: 1990 },
                    { name: "3 Uplink", start: 1710, stop: 1785 },
                    { name: "3 Downlink", start: 1805, stop: 1880 },
                    { name: "4 Uplink", start: 1710, stop: 1755 },
                    { name: "4 Downlink", start: 2110, stop: 2155 },
                    { name: "5 Uplink", start: 824, stop: 849 },
                    { name: "5 Downlink", start: 869, stop: 894 },
                    { name: "7 Uplink", start: 2500, stop: 2570 },
                    { name: "7 Downlink", start: 2620, stop: 2690 },
                    { name: "8 Uplink", start: 880, stop: 915 },
                    { name: "8 Downlink", start: 925, stop: 960 },
                    { name: "11 Uplink", start: 1427.9, stop: 1447.9 },
                    { name: "11 Downlink", start: 1475.9, stop: 1495.9 },
                    { name: "12 Uplink", start: 699, stop: 716 },
                    { name: "12 Downlink", start: 729, stop: 746 },
                    { name: "13 Uplink", start: 777, stop: 787 },
                    { name: "13 Downlink", start: 746, stop: 756 },
                    { name: "14 Uplink", start: 788, stop: 798 },
                    { name: "14 Downlink", start: 758, stop: 768 },
                    { name: "17 Uplink", start: 704, stop: 716 },
                    { name: "17 Downlink", start: 734, stop: 746 },
                    { name: "18 Uplink", start: 815, stop: 830 },
                    { name: "18 Downlink", start: 860, stop: 875 },
                    { name: "19 Uplink", start: 830, stop: 845 },
                    { name: "19 Downlink", start: 875, stop: 890 },
                    { name: "20 Uplink", start: 832, stop: 862 },
                    { name: "20 Downlink", start: 791, stop: 821 },
                    { name: "21 Uplink", start: 1447.9, stop: 1462.9 },
                    { name: "21 Downlink", start: 1495.9, stop: 1510.9 },
                    { name: "24 Uplink", start: 1626.5, stop: 1660.5 },
                    { name: "24 Downlink", start: 1525, stop: 1559 },
                    { name: "25 Uplink", start: 1850, stop: 1915 },
                    { name: "25 Downlink", start: 1930, stop: 1995 },
                    { name: "26 Uplink", start: 814, stop: 849 },
                    { name: "26 Downlink", start: 859, stop: 894 },
                    { name: "28 Uplink", start: 703, stop: 748 },
                    { name: "28 Downlink", start: 758, stop: 803 },
                    { name: "29", start: 717, stop: 728 },
                    { name: "30 Uplink", start: 2305, stop: 2315 },
                    { name: "30 Downlink", start: 2350, stop: 2360 },
                    { name: "31 Uplink", start: 452.5, stop: 457.5 },
                    { name: "31 Downlink", start: 462.5, stop: 467.5 },
                    { name: "32", start: 1452, stop: 1496 },
                    { name: "34 Uplink", start: 2010, stop: 2025 },
                    { name: "37 Uplink", start: 1910, stop: 1930 },
                    { name: "38 Uplink", start: 2570, stop: 2620 },
                    { name: "39 Uplink", start: 1880, stop: 1920 },
                    { name: "40 Uplink", start: 2300, stop: 2400 },
                    { name: "41 Uplink", start: 2496, stop: 2690 },
                    { name: "42 Uplink", start: 3400, stop: 3600 },
                    { name: "43 Uplink", start: 3600, stop: 3800 },
                    { name: "46 Uplink", start: 5150, stop: 5925 },
                    { name: "47 Uplink", start: 5855, stop: 5925 },
                    { name: "48 Uplink", start: 3550, stop: 3700 },
                    { name: "50 Uplink", start: 1432, stop: 1517 },
                    { name: "51 Uplink", start: 1427, stop: 1432 },
                    { name: "53 Uplink", start: 2483.5, stop: 2495 },
                    { name: "54 Uplink", start: 1670, stop: 1675 },
                    { name: "65 Uplink", start: 1920, stop: 2010 },
                    { name: "65 Downlink", start: 2110, stop: 2200 },
                    { name: "66 Uplink", start: 1710, stop: 1780 },
                    { name: "66 Downlink", start: 2110, stop: 2200 },
                    { name: "67", start: 738, stop: 758 },
                    { name: "69", start: 2570, stop: 2620 },
                    { name: "70 Uplink", start: 1695, stop: 1710 },
                    { name: "70 Downlink", start: 1995, stop: 2020 },
                    { name: "71 Uplink", start: 663, stop: 698 },
                    { name: "71 Downlink", start: 617, stop: 652 },
                    { name: "72 Uplink", start: 451, stop: 456 },
                    { name: "72 Downlink", start: 461, stop: 466 },
                    { name: "73 Uplink", start: 450, stop: 455 },
                    { name: "73 Downlink", start: 460, stop: 465 },
                    { name: "74 Uplink", start: 1427, stop: 1470 },
                    { name: "74 Downlink", start: 1475, stop: 1518 },
                    { name: "75", start: 1432, stop: 1517 },
                    { name: "76", start: 1427, stop: 1432 },
                    { name: "85 Uplink", start: 698, stop: 716 },
                    { name: "85 Downlink", start: 728, stop: 746 },
                    { name: "87 Uplink", start: 410, stop: 415 },
                    { name: "87 Downlink", start: 420, stop: 425 },
                    { name: "88 Uplink", start: 412, stop: 417 },
                    { name: "88 Downlink", start: 422, stop: 427 },
                    { name: "103 Uplink", start: 787, stop: 788 },
                    { name: "103 Downlink", start: 757, stop: 758 },
                    { name: "106 Uplink", start: 896, stop: 901 },
                    { name: "106 Downlink", start: 935, stop: 940 },
                    { name: "107", start: 612, stop: 652 },
                    { name: "108", start: 470, stop: 698 },
                ],
            };

            const zigbeeChannels = {
                "868 MHz": [
                    { channel: 0, frequency: 868, width: 2, domain: ["EU"] },
                ],
                "915 MHz": [
                    {
                        channel: 1,
                        frequency: 906,
                        width: 2,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 2,
                        frequency: 908,
                        width: 2,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 3,
                        frequency: 910,
                        width: 2,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 4,
                        frequency: 912,
                        width: 2,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 5,
                        frequency: 914,
                        width: 2,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 6,
                        frequency: 916,
                        width: 2,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 7,
                        frequency: 918,
                        width: 2,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 8,
                        frequency: 920,
                        width: 2,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 9,
                        frequency: 922,
                        width: 2,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 10,
                        frequency: 924,
                        width: 2,
                        domain: ["US", "AU"],
                    },
                ],
                "2.4 GHz": [
                    {
                        channel: 11,
                        frequency: 2405,
                        width: 2,
                        domain: ["WW", "US", "AU"],
                    },
                    {
                        channel: 12,
                        frequency: 2410,
                        width: 2,
                        domain: ["WW", "US", "AU"],
                    },
                    {
                        channel: 13,
                        frequency: 2415,
                        width: 2,
                        domain: ["WW", "US", "AU"],
                    },
                    {
                        channel: 14,
                        frequency: 2420,
                        width: 2,
                        domain: ["WW", "US", "AU"],
                    },
                    {
                        channel: 15,
                        frequency: 2425,
                        width: 2,
                        domain: ["WW", "US", "AU"],
                    },
                    {
                        channel: 16,
                        frequency: 2430,
                        width: 2,
                        domain: ["WW", "US", "AU"],
                    },
                    {
                        channel: 17,
                        frequency: 2435,
                        width: 2,
                        domain: ["WW", "US", "AU"],
                    },
                    {
                        channel: 18,
                        frequency: 2440,
                        width: 2,
                        domain: ["WW", "US", "AU"],
                    },
                    {
                        channel: 19,
                        frequency: 2445,
                        width: 2,
                        domain: ["WW", "US", "AU"],
                    },
                    {
                        channel: 20,
                        frequency: 2450,
                        width: 2,
                        domain: ["WW", "US", "AU"],
                    },
                    {
                        channel: 21,
                        frequency: 2455,
                        width: 2,
                        domain: ["WW", "US", "AU"],
                    },
                    {
                        channel: 22,
                        frequency: 2460,
                        width: 2,
                        domain: ["WW", "US", "AU"],
                    },
                    {
                        channel: 23,
                        frequency: 2465,
                        width: 2,
                        domain: ["WW", "US", "AU"],
                    },
                    {
                        channel: 24,
                        frequency: 2470,
                        width: 2,
                        domain: ["WW", "US", "AU"],
                    },
                    {
                        channel: 25,
                        frequency: 2475,
                        width: 2,
                        domain: ["WW", "US", "AU"],
                    },
                    {
                        channel: 26,
                        frequency: 2480,
                        width: 2,
                        domain: ["WW", "US", "AU"],
                    },
                ],
            };

            const bluetoothChannels = {
                Classic: [
                    { channel: 0, frequency: 2402, width: 1 },
                    { channel: 1, frequency: 2403, width: 1 },
                    { channel: 2, frequency: 2404, width: 1 },
                    { channel: 3, frequency: 2405, width: 1 },
                    { channel: 4, frequency: 2406, width: 1 },
                    { channel: 5, frequency: 2407, width: 1 },
                    { channel: 6, frequency: 2408, width: 1 },
                    { channel: 7, frequency: 2409, width: 1 },
                    { channel: 8, frequency: 2410, width: 1 },
                    { channel: 9, frequency: 2411, width: 1 },
                    { channel: 10, frequency: 2412, width: 1 },
                    { channel: 11, frequency: 2413, width: 1 },
                    { channel: 12, frequency: 2414, width: 1 },
                    { channel: 13, frequency: 2415, width: 1 },
                    { channel: 14, frequency: 2416, width: 1 },
                    { channel: 15, frequency: 2417, width: 1 },
                    { channel: 16, frequency: 2418, width: 1 },
                    { channel: 17, frequency: 2419, width: 1 },
                    { channel: 18, frequency: 2420, width: 1 },
                    { channel: 19, frequency: 2421, width: 1 },
                    { channel: 20, frequency: 2422, width: 1 },
                    { channel: 21, frequency: 2423, width: 1 },
                    { channel: 22, frequency: 2424, width: 1 },
                    { channel: 23, frequency: 2425, width: 1 },
                    { channel: 24, frequency: 2426, width: 1 },
                    { channel: 25, frequency: 2427, width: 1 },
                    { channel: 26, frequency: 2428, width: 1 },
                    { channel: 27, frequency: 2429, width: 1 },
                    { channel: 28, frequency: 2430, width: 1 },
                    { channel: 29, frequency: 2431, width: 1 },
                    { channel: 30, frequency: 2432, width: 1 },
                    { channel: 31, frequency: 2433, width: 1 },
                    { channel: 32, frequency: 2434, width: 1 },
                    { channel: 33, frequency: 2435, width: 1 },
                    { channel: 34, frequency: 2436, width: 1 },
                    { channel: 35, frequency: 2437, width: 1 },
                    { channel: 36, frequency: 2438, width: 1 },
                    { channel: 37, frequency: 2439, width: 1 },
                    { channel: 38, frequency: 2440, width: 1 },
                    { channel: 39, frequency: 2441, width: 1 },
                    { channel: 40, frequency: 2442, width: 1 },
                    { channel: 41, frequency: 2443, width: 1 },
                    { channel: 42, frequency: 2444, width: 1 },
                    { channel: 43, frequency: 2445, width: 1 },
                    { channel: 44, frequency: 2446, width: 1 },
                    { channel: 45, frequency: 2447, width: 1 },
                    { channel: 46, frequency: 2448, width: 1 },
                    { channel: 47, frequency: 2449, width: 1 },
                    { channel: 48, frequency: 2450, width: 1 },
                    { channel: 49, frequency: 2451, width: 1 },
                    { channel: 50, frequency: 2452, width: 1 },
                    { channel: 51, frequency: 2453, width: 1 },
                    { channel: 52, frequency: 2454, width: 1 },
                    { channel: 53, frequency: 2455, width: 1 },
                    { channel: 54, frequency: 2456, width: 1 },
                    { channel: 55, frequency: 2457, width: 1 },
                    { channel: 56, frequency: 2458, width: 1 },
                    { channel: 57, frequency: 2459, width: 1 },
                    { channel: 58, frequency: 2460, width: 1 },
                    { channel: 59, frequency: 2461, width: 1 },
                    { channel: 60, frequency: 2462, width: 1 },
                    { channel: 61, frequency: 2463, width: 1 },
                    { channel: 62, frequency: 2464, width: 1 },
                    { channel: 63, frequency: 2465, width: 1 },
                    { channel: 64, frequency: 2466, width: 1 },
                    { channel: 65, frequency: 2467, width: 1 },
                    { channel: 66, frequency: 2468, width: 1 },
                    { channel: 67, frequency: 2469, width: 1 },
                    { channel: 68, frequency: 2470, width: 1 },
                    { channel: 69, frequency: 2471, width: 1 },
                    { channel: 70, frequency: 2472, width: 1 },
                    { channel: 71, frequency: 2473, width: 1 },
                    { channel: 72, frequency: 2474, width: 1 },
                    { channel: 73, frequency: 2475, width: 1 },
                    { channel: 74, frequency: 2476, width: 1 },
                    { channel: 75, frequency: 2477, width: 1 },
                    { channel: 76, frequency: 2478, width: 1 },
                    { channel: 77, frequency: 2479, width: 1 },
                    { channel: 78, frequency: 2480, width: 1 },
                ],
                "Low Energy": [
                    {
                        channel: 37,
                        frequency: 2402,
                        width: 2,
                        application: "Primary Advertising",
                    },
                    {
                        channel: 0,
                        frequency: 2404,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 1,
                        frequency: 2406,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 2,
                        frequency: 2408,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 3,
                        frequency: 2410,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 4,
                        frequency: 2412,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 5,
                        frequency: 2414,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 6,
                        frequency: 2416,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 7,
                        frequency: 2418,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 8,
                        frequency: 2420,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 9,
                        frequency: 2422,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 10,
                        frequency: 2424,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 38,
                        frequency: 2426,
                        width: 2,
                        application: "Primary Advertising",
                    },
                    {
                        channel: 11,
                        frequency: 2428,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 12,
                        frequency: 2430,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 13,
                        frequency: 2432,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 14,
                        frequency: 2434,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 15,
                        frequency: 2436,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 16,
                        frequency: 2438,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 17,
                        frequency: 2440,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 18,
                        frequency: 2442,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 19,
                        frequency: 2444,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 20,
                        frequency: 2446,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 21,
                        frequency: 2448,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 22,
                        frequency: 2450,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 23,
                        frequency: 2452,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 24,
                        frequency: 2454,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 25,
                        frequency: 2456,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 26,
                        frequency: 2458,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 27,
                        frequency: 2460,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 28,
                        frequency: 2462,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 29,
                        frequency: 2464,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 30,
                        frequency: 2466,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 31,
                        frequency: 2468,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 32,
                        frequency: 2470,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 33,
                        frequency: 2472,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 34,
                        frequency: 2474,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 35,
                        frequency: 2476,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 36,
                        frequency: 2478,
                        width: 2,
                        application: "Data Channel",
                    },
                    {
                        channel: 39,
                        frequency: 2480,
                        width: 2,
                        application: "Primary Advertising",
                    },
                ],
            };

            const wifiChannels = {
                "900 MHz": [
                    // 1 MHz channels
                    { channel: 1, frequency: 863.5, width: 1, domain: ["EU"] },
                    { channel: 3, frequency: 864.5, width: 1, domain: ["EU"] },
                    { channel: 5, frequency: 865.5, width: 1, domain: ["EU"] },
                    { channel: 7, frequency: 866.5, width: 1, domain: ["EU"] },
                    { channel: 9, frequency: 867.5, width: 1, domain: ["EU"] },
                    { channel: 1, frequency: 902.5, width: 1, domain: ["US"] },
                    { channel: 3, frequency: 903.5, width: 1, domain: ["US"] },
                    { channel: 5, frequency: 904.5, width: 1, domain: ["US"] },
                    { channel: 7, frequency: 905.5, width: 1, domain: ["US"] },
                    { channel: 9, frequency: 906.5, width: 1, domain: ["US"] },
                    { channel: 11, frequency: 907.5, width: 1, domain: ["US"] },
                    { channel: 13, frequency: 908.5, width: 1, domain: ["US"] },
                    { channel: 15, frequency: 909.5, width: 1, domain: ["US"] },
                    { channel: 17, frequency: 910.5, width: 1, domain: ["US"] },
                    { channel: 19, frequency: 911.5, width: 1, domain: ["US"] },
                    { channel: 21, frequency: 912.5, width: 1, domain: ["US"] },
                    { channel: 23, frequency: 913.5, width: 1, domain: ["US"] },
                    { channel: 25, frequency: 914.5, width: 1, domain: ["US"] },
                    {
                        channel: 27,
                        frequency: 915.5,
                        width: 1,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 29,
                        frequency: 916.5,
                        width: 1,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 31,
                        frequency: 917.5,
                        width: 1,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 33,
                        frequency: 918.5,
                        width: 1,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 35,
                        frequency: 919.5,
                        width: 1,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 37,
                        frequency: 920.5,
                        width: 1,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 39,
                        frequency: 921.5,
                        width: 1,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 41,
                        frequency: 922.5,
                        width: 1,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 43,
                        frequency: 923.5,
                        width: 1,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 45,
                        frequency: 924.5,
                        width: 1,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 47,
                        frequency: 925.5,
                        width: 1,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 49,
                        frequency: 926.5,
                        width: 1,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 51,
                        frequency: 927.5,
                        width: 1,
                        domain: ["US", "AU"],
                    },
                    // Japanese channels
                    { channel: 1, frequency: 917.0, width: 1, domain: ["JP"] },
                    { channel: 3, frequency: 918.0, width: 1, domain: ["JP"] },
                    { channel: 5, frequency: 919.0, width: 1, domain: ["JP"] },
                    { channel: 7, frequency: 920.0, width: 1, domain: ["JP"] },
                    { channel: 9, frequency: 921.0, width: 1, domain: ["JP"] },
                    { channel: 11, frequency: 922.0, width: 1, domain: ["JP"] },
                    { channel: 13, frequency: 923.0, width: 1, domain: ["JP"] },
                    { channel: 15, frequency: 924.0, width: 1, domain: ["JP"] },
                    { channel: 17, frequency: 925.0, width: 1, domain: ["JP"] },
                    { channel: 19, frequency: 926.0, width: 1, domain: ["JP"] },
                    { channel: 21, frequency: 927.0, width: 1, domain: ["JP"] },

                    // 2 MHz channels
                    { channel: 2, frequency: 903, width: 2, domain: ["US"] },
                    { channel: 6, frequency: 905, width: 2, domain: ["US"] },
                    { channel: 10, frequency: 907, width: 2, domain: ["US"] },
                    { channel: 14, frequency: 909, width: 2, domain: ["US"] },
                    { channel: 18, frequency: 911, width: 2, domain: ["US"] },
                    { channel: 22, frequency: 913, width: 2, domain: ["US"] },
                    { channel: 26, frequency: 915, width: 2, domain: ["US"] },
                    {
                        channel: 30,
                        frequency: 917,
                        width: 2,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 34,
                        frequency: 919,
                        width: 2,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 38,
                        frequency: 921,
                        width: 2,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 42,
                        frequency: 923,
                        width: 2,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 46,
                        frequency: 925,
                        width: 2,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 50,
                        frequency: 927,
                        width: 2,
                        domain: ["US", "AU"],
                    },

                    // 4 MHz channels
                    { channel: 8, frequency: 906, width: 4, domain: ["US"] },
                    { channel: 16, frequency: 910, width: 4, domain: ["US"] },
                    { channel: 24, frequency: 914, width: 4, domain: ["US"] },
                    {
                        channel: 32,
                        frequency: 918,
                        width: 4,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 40,
                        frequency: 922,
                        width: 4,
                        domain: ["US", "AU"],
                    },
                    {
                        channel: 48,
                        frequency: 926,
                        width: 4,
                        domain: ["US", "AU"],
                    },

                    // 8 MHz channels
                    { channel: 12, frequency: 908, width: 8, domain: ["US"] },
                    { channel: 28, frequency: 916, width: 8, domain: ["US"] },
                    {
                        channel: 44,
                        frequency: 924,
                        width: 8,
                        domain: ["US", "AU"],
                    },

                    // 16 MHz channel
                    { channel: 20, frequency: 912, width: 16, domain: ["US"] },
                ],
                "2.4 GHz": [
                    {
                        channel: 1,
                        frequency: 2412,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 2,
                        frequency: 2417,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                        overlapping: true,
                    },
                    {
                        channel: 3,
                        frequency: 2422,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                        overlapping: true,
                    },
                    {
                        channel: 4,
                        frequency: 2427,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                        overlapping: true,
                    },
                    {
                        channel: 5,
                        frequency: 2432,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                        overlapping: true,
                    },
                    {
                        channel: 6,
                        frequency: 2437,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 7,
                        frequency: 2442,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                        overlapping: true,
                    },
                    {
                        channel: 8,
                        frequency: 2447,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                        overlapping: true,
                    },
                    {
                        channel: 9,
                        frequency: 2452,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                        overlapping: true,
                    },
                    {
                        channel: 10,
                        frequency: 2457,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                        overlapping: true,
                    },
                    {
                        channel: 11,
                        frequency: 2462,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 12,
                        frequency: 2467,
                        width: 20,
                        domain: ["EU", "AU", "JP"],
                        overlapping: true,
                    },
                    {
                        channel: 13,
                        frequency: 2472,
                        width: 20,
                        domain: ["EU", "AU", "JP"],
                        overlapping: true,
                    },
                    {
                        channel: 14,
                        frequency: 2484,
                        width: 20,
                        domain: ["JP"],
                        dsss: true,
                    },
                ],
                "5 GHz": [
                    {
                        channel: 36,
                        frequency: 5180,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 40,
                        frequency: 5200,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 44,
                        frequency: 5220,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 48,
                        frequency: 5240,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 52,
                        frequency: 5260,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 56,
                        frequency: 5280,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 60,
                        frequency: 5300,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 64,
                        frequency: 5320,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 100,
                        frequency: 5500,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 104,
                        frequency: 5520,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 108,
                        frequency: 5540,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 112,
                        frequency: 5560,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 116,
                        frequency: 5580,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 120,
                        frequency: 5600,
                        width: 20,
                        domain: ["WW", "US", "EU", "JP"],
                    },
                    {
                        channel: 124,
                        frequency: 5620,
                        width: 20,
                        domain: ["WW", "US", "EU", "JP"],
                    },
                    {
                        channel: 128,
                        frequency: 5640,
                        width: 20,
                        domain: ["WW", "US", "EU", "JP"],
                    },
                    {
                        channel: 132,
                        frequency: 5660,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 136,
                        frequency: 5680,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 140,
                        frequency: 5700,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 144,
                        frequency: 5720,
                        width: 20,
                        domain: ["WW", "US", "AU", "JP"],
                    },
                    {
                        channel: 149,
                        frequency: 5745,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU"],
                    },
                    {
                        channel: 153,
                        frequency: 5765,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU"],
                    },
                    {
                        channel: 157,
                        frequency: 5785,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU"],
                    },
                    {
                        channel: 161,
                        frequency: 5805,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU"],
                    },
                    {
                        channel: 165,
                        frequency: 5825,
                        width: 20,
                        domain: ["WW", "US", "EU", "AU"],
                    },
                    // 40 MHz channels
                    {
                        channel: 38,
                        frequency: 5190,
                        width: 40,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 46,
                        frequency: 5230,
                        width: 40,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 54,
                        frequency: 5270,
                        width: 40,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 62,
                        frequency: 5310,
                        width: 40,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 102,
                        frequency: 5510,
                        width: 40,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 110,
                        frequency: 5550,
                        width: 40,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 118,
                        frequency: 5590,
                        width: 40,
                        domain: ["WW", "US", "EU", "JP"],
                    },
                    {
                        channel: 126,
                        frequency: 5630,
                        width: 40,
                        domain: ["WW", "US", "EU", "JP"],
                    },
                    {
                        channel: 134,
                        frequency: 5670,
                        width: 40,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 142,
                        frequency: 5710,
                        width: 40,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 151,
                        frequency: 5755,
                        width: 40,
                        domain: ["WW", "US", "EU", "AU"],
                    },
                    {
                        channel: 159,
                        frequency: 5795,
                        width: 40,
                        domain: ["WW", "US", "EU", "AU"],
                    },
                    // 80 MHz channels
                    {
                        channel: 42,
                        frequency: 5210,
                        width: 80,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 58,
                        frequency: 5290,
                        width: 80,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 106,
                        frequency: 5530,
                        width: 80,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 122,
                        frequency: 5610,
                        width: 80,
                        domain: ["WW", "US", "EU", "JP"],
                    },
                    {
                        channel: 138,
                        frequency: 5690,
                        width: 80,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 155,
                        frequency: 5775,
                        width: 80,
                        domain: ["WW", "US", "EU", "AU"],
                    },
                    // 160 MHz channels
                    {
                        channel: 50,
                        frequency: 5250,
                        width: 160,
                        domain: ["WW", "US", "EU", "AU", "JP"],
                    },
                    {
                        channel: 114,
                        frequency: 5570,
                        width: 160,
                        domain: ["WW", "US", "EU", "JP"],
                    },
                ],
                "6 GHz": [
                    {
                        channel: "1E",
                        frequency: 5955,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "5E",
                        frequency: 5975,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "9E",
                        frequency: 5995,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "13E",
                        frequency: 6015,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "17E",
                        frequency: 6035,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "21E",
                        frequency: 6055,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "25E",
                        frequency: 6075,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "29E",
                        frequency: 6095,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "33E",
                        frequency: 6115,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "37E",
                        frequency: 6135,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "41E",
                        frequency: 6155,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "45E",
                        frequency: 6175,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "49E",
                        frequency: 6195,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "53E",
                        frequency: 6215,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "57E",
                        frequency: 6235,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "61E",
                        frequency: 6255,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "65E",
                        frequency: 6275,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "69E",
                        frequency: 6295,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "73E",
                        frequency: 6315,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "77E",
                        frequency: 6335,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "81E",
                        frequency: 6355,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "85E",
                        frequency: 6375,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "89E",
                        frequency: 6395,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "93E",
                        frequency: 6415,
                        width: 20,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "97E",
                        frequency: 6435,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "101E",
                        frequency: 6455,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "105E",
                        frequency: 6475,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "109E",
                        frequency: 6495,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "113E",
                        frequency: 6515,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "117E",
                        frequency: 6535,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "121E",
                        frequency: 6555,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "125E",
                        frequency: 6575,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "129E",
                        frequency: 6595,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "133E",
                        frequency: 6615,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "137E",
                        frequency: 6635,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "141E",
                        frequency: 6655,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "145E",
                        frequency: 6675,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "149E",
                        frequency: 6695,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "153E",
                        frequency: 6715,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "157E",
                        frequency: 6735,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "161E",
                        frequency: 6755,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "165E",
                        frequency: 6775,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "169E",
                        frequency: 6795,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "173E",
                        frequency: 6815,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "177E",
                        frequency: 6835,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "181E",
                        frequency: 6855,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "185E",
                        frequency: 6875,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "189E",
                        frequency: 6895,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "193E",
                        frequency: 6915,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "197E",
                        frequency: 6935,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "201E",
                        frequency: 6955,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "205E",
                        frequency: 6975,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "209E",
                        frequency: 6995,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "213E",
                        frequency: 7015,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "217E",
                        frequency: 7035,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "221E",
                        frequency: 7055,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "225E",
                        frequency: 7075,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "229E",
                        frequency: 7095,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "233E",
                        frequency: 7115,
                        width: 20,
                        domain: ["US"],
                    },
                    {
                        channel: "3E",
                        frequency: 5965,
                        width: 40,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "11E",
                        frequency: 6005,
                        width: 40,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "19E",
                        frequency: 6045,
                        width: 40,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "27E",
                        frequency: 6085,
                        width: 40,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "35E",
                        frequency: 6125,
                        width: 40,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "43E",
                        frequency: 6165,
                        width: 40,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "51E",
                        frequency: 6205,
                        width: 40,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "59E",
                        frequency: 6245,
                        width: 40,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "67E",
                        frequency: 6285,
                        width: 40,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "75E",
                        frequency: 6325,
                        width: 40,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "83E",
                        frequency: 6365,
                        width: 40,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "91E",
                        frequency: 6405,
                        width: 40,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "99E",
                        frequency: 6445,
                        width: 40,
                        domain: ["US"],
                    },
                    {
                        channel: "107E",
                        frequency: 6485,
                        width: 40,
                        domain: ["US"],
                    },
                    {
                        channel: "115E",
                        frequency: 6525,
                        width: 40,
                        domain: ["US"],
                    },
                    {
                        channel: "123E",
                        frequency: 6565,
                        width: 40,
                        domain: ["US"],
                    },
                    {
                        channel: "131E",
                        frequency: 6605,
                        width: 40,
                        domain: ["US"],
                    },
                    {
                        channel: "139E",
                        frequency: 6645,
                        width: 40,
                        domain: ["US"],
                    },
                    {
                        channel: "147E",
                        frequency: 6685,
                        width: 40,
                        domain: ["US"],
                    },
                    {
                        channel: "155E",
                        frequency: 6725,
                        width: 40,
                        domain: ["US"],
                    },
                    {
                        channel: "163E",
                        frequency: 6765,
                        width: 40,
                        domain: ["US"],
                    },
                    {
                        channel: "171E",
                        frequency: 6805,
                        width: 40,
                        domain: ["US"],
                    },
                    {
                        channel: "179E",
                        frequency: 6845,
                        width: 40,
                        domain: ["US"],
                    },
                    {
                        channel: "187E",
                        frequency: 6885,
                        width: 40,
                        domain: ["US"],
                    },
                    {
                        channel: "195E",
                        frequency: 6925,
                        width: 40,
                        domain: ["US"],
                    },
                    {
                        channel: "203E",
                        frequency: 6965,
                        width: 40,
                        domain: ["US"],
                    },
                    {
                        channel: "211E",
                        frequency: 7005,
                        width: 40,
                        domain: ["US"],
                    },
                    {
                        channel: "219E",
                        frequency: 7045,
                        width: 40,
                        domain: ["US"],
                    },
                    {
                        channel: "227E",
                        frequency: 7085,
                        width: 40,
                        domain: ["US"],
                    },
                    {
                        channel: "7E",
                        frequency: 5985,
                        width: 80,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "23E",
                        frequency: 6065,
                        width: 80,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "39E",
                        frequency: 6145,
                        width: 80,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "55E",
                        frequency: 6225,
                        width: 80,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "71E",
                        frequency: 6305,
                        width: 80,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "87E",
                        frequency: 6385,
                        width: 80,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "103E",
                        frequency: 6465,
                        width: 80,
                        domain: ["US"],
                    },
                    {
                        channel: "119E",
                        frequency: 6545,
                        width: 80,
                        domain: ["US"],
                    },
                    {
                        channel: "135E",
                        frequency: 6625,
                        width: 80,
                        domain: ["US"],
                    },
                    {
                        channel: "151E",
                        frequency: 6705,
                        width: 80,
                        domain: ["US"],
                    },
                    {
                        channel: "167E",
                        frequency: 6785,
                        width: 80,
                        domain: ["US"],
                    },
                    {
                        channel: "183E",
                        frequency: 6865,
                        width: 80,
                        domain: ["US"],
                    },
                    {
                        channel: "199E",
                        frequency: 6945,
                        width: 80,
                        domain: ["US"],
                    },
                    {
                        channel: "215E",
                        frequency: 7025,
                        width: 80,
                        domain: ["US"],
                    },
                    {
                        channel: "15E",
                        frequency: 6025,
                        width: 160,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "47E",
                        frequency: 6185,
                        width: 160,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "79E",
                        frequency: 6345,
                        width: 160,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "111E",
                        frequency: 6505,
                        width: 160,
                        domain: ["US"],
                    },
                    {
                        channel: "143E",
                        frequency: 6665,
                        width: 160,
                        domain: ["US"],
                    },
                    {
                        channel: "175E",
                        frequency: 6825,
                        width: 160,
                        domain: ["US"],
                    },
                    {
                        channel: "207E",
                        frequency: 6985,
                        width: 160,
                        domain: ["US"],
                    },
                    {
                        channel: "31E",
                        frequency: 6105,
                        width: 320,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "63E",
                        frequency: 6265,
                        width: 320,
                        domain: ["US", "EU", "AU", "JP"],
                    },
                    {
                        channel: "95E",
                        frequency: 6425,
                        width: 320,
                        domain: ["US"],
                    },
                    {
                        channel: "127E",
                        frequency: 6585,
                        width: 320,
                        domain: ["US"],
                    },
                    {
                        channel: "159E",
                        frequency: 6745,
                        width: 320,
                        domain: ["US"],
                    },
                    {
                        channel: "191E",
                        frequency: 6905,
                        width: 320,
                        domain: ["US"],
                    },
                ],
            };

            const loRaChannels = {
                "900 MHz": [
                    {
                        channel: 0,
                        frequency: 902.3,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 1,
                        frequency: 902.5,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 2,
                        frequency: 902.7,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 3,
                        frequency: 902.9,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 4,
                        frequency: 903.1,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 5,
                        frequency: 903.3,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 6,
                        frequency: 903.5,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 7,
                        frequency: 903.7,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 8,
                        frequency: 903.9,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 9,
                        frequency: 904.1,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 10,
                        frequency: 904.3,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 11,
                        frequency: 904.5,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 12,
                        frequency: 904.7,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 13,
                        frequency: 904.9,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 14,
                        frequency: 905.1,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 15,
                        frequency: 905.3,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 16,
                        frequency: 905.5,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 17,
                        frequency: 905.7,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 18,
                        frequency: 905.9,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 19,
                        frequency: 906.1,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 20,
                        frequency: 906.3,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 21,
                        frequency: 906.5,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 22,
                        frequency: 906.7,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 23,
                        frequency: 906.9,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 24,
                        frequency: 907.1,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 25,
                        frequency: 907.3,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 26,
                        frequency: 907.5,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 27,
                        frequency: 907.7,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 28,
                        frequency: 907.9,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 29,
                        frequency: 908.1,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 30,
                        frequency: 908.3,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 31,
                        frequency: 908.5,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 32,
                        frequency: 908.7,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 33,
                        frequency: 908.9,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 34,
                        frequency: 909.1,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 35,
                        frequency: 909.3,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 36,
                        frequency: 909.5,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 37,
                        frequency: 909.7,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 38,
                        frequency: 909.9,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 39,
                        frequency: 910.1,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 40,
                        frequency: 910.3,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 41,
                        frequency: 910.5,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 42,
                        frequency: 910.7,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 43,
                        frequency: 910.9,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 44,
                        frequency: 911.1,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 45,
                        frequency: 911.3,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 46,
                        frequency: 911.5,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 47,
                        frequency: 911.7,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 48,
                        frequency: 911.9,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 49,
                        frequency: 912.1,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 50,
                        frequency: 912.3,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 51,
                        frequency: 912.5,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 52,
                        frequency: 912.7,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 53,
                        frequency: 912.9,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 54,
                        frequency: 913.1,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 55,
                        frequency: 913.3,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 56,
                        frequency: 913.5,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 57,
                        frequency: 913.7,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 58,
                        frequency: 913.9,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 59,
                        frequency: 914.1,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 60,
                        frequency: 914.3,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 61,
                        frequency: 914.5,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 62,
                        frequency: 914.7,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 63,
                        frequency: 914.9,
                        width: 0.125,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 64,
                        frequency: 903,
                        width: 0.5,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 65,
                        frequency: 904.6,
                        width: 0.5,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 66,
                        frequency: 906.2,
                        width: 0.5,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 67,
                        frequency: 907.8,
                        width: 0.5,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 68,
                        frequency: 909.4,
                        width: 0.5,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 69,
                        frequency: 911,
                        width: 0.5,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 70,
                        frequency: 912.6,
                        width: 0.5,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 71,
                        frequency: 914.2,
                        width: 0.5,
                        domain: ["US"],
                        type: "uplink",
                    },
                    {
                        channel: 0,
                        frequency: 923.3,
                        width: 0.5,
                        domain: ["US"],
                        type: "downlink",
                    },
                    {
                        channel: 1,
                        frequency: 923.9,
                        width: 0.5,
                        domain: ["US"],
                        type: "downlink",
                    },
                    {
                        channel: 2,
                        frequency: 924.5,
                        width: 0.5,
                        domain: ["US"],
                        type: "downlink",
                    },
                    {
                        channel: 3,
                        frequency: 925.1,
                        width: 0.5,
                        domain: ["US"],
                        type: "downlink",
                    },
                    {
                        channel: 4,
                        frequency: 925.7,
                        width: 0.5,
                        domain: ["US"],
                        type: "downlink",
                    },
                    {
                        channel: 5,
                        frequency: 926.3,
                        width: 0.5,
                        domain: ["US"],
                        type: "downlink",
                    },
                    {
                        channel: 6,
                        frequency: 926.9,
                        width: 0.5,
                        domain: ["US"],
                        type: "downlink",
                    },
                    {
                        channel: 7,
                        frequency: 927.5,
                        width: 0.5,
                        domain: ["US"],
                        type: "downlink",
                    },
                ],
            };

            function resizeCanvas() {
                // Increase the size of the canvas
                canvas.width = window.innerWidth * window.devicePixelRatio;
                canvas.height = window.innerHeight * window.devicePixelRatio;

                if (DEBUG) {
                    console.log("Device Pixel Ratio:", window.devicePixelRatio);
                    console.log("window.innerHeight", window.innerHeight);
                }

                // Scale drawing operations
                context.scale(devicePixelRatio, devicePixelRatio);
                context.lineWidth = 2;

                // scale everything down using CSS
                canvas.style.width = window.innerWidth + "px";
                canvas.style.height = window.innerHeight + "px";
            }

            resizeCanvas();
            window.addEventListener("resize", resizeCanvas);

            // Set the center of the viewport
            function setViewportFrequency(viewportFrequency) {
                offset.x =
                    canvas.width / window.devicePixelRatio / 2 -
                    viewportFrequency * 2 * scale;
            }

            function setViewportFrequencyRange(startFrequency, stopFrequency) {
                // Calculate the width of the viewport in pixels (accounting for device pixel ratio)
                const viewportWidth = canvas.width / window.devicePixelRatio;

                // Calculate required scale to fit the frequency range in the viewport
                // The 2 comes from the base scale factor in mhzToScreenX where pixelsPerMhz = 2 * scale
                scale = viewportWidth / ((stopFrequency - startFrequency) * 2);

                // Clamp the scale to min/max zoom levels
                scale = Math.min(Math.max(minZoom, scale), maxZoom);

                // Calculate the offset needed to position startFrequency at the left edge
                offset.x = -startFrequency * 2 * scale;
            }

            setViewportFrequencyRange(2395, 2505);

            // Common drawing utilities
            function getBaselineY() {
                return canvas.height / window.devicePixelRatio / 2;
            }

            function getZoomTier(scale) {
                return Object.values(zoomTiers).find(
                    (tier) => scale < tier.threshold,
                );
            }

            function drawBandLabels() {
                if (!showBandLabels) return;

                const yPosition =
                    getBaselineY() -
                    chartSettings.spectralMaskHeight -
                    LABEL_HEIGHT -
                    10;

                context.font = "14px Quicksand";
                context.textAlign = "center";
                context.textBaseline = "middle";

                bands.forEach((newBands) => {
                    const startX = mhzToScreenX(newBands.start);
                    const stopX = mhzToScreenX(newBands.stop);
                    const width = stopX - startX;
                    if (width < 4) return;
                    const centerX = startX + width / 2;

                    // Draw rectangle with rounded corners
                    context.beginPath();
                    context.roundRect(
                        startX,
                        yPosition,
                        width,
                        LABEL_HEIGHT,
                        6,
                    );
                    context.fillStyle = "#E5E5E5";
                    context.fill();

                    // Calculate the text width and add padding
                    const textWidth =
                        context.measureText(newBands.name).width + 4;

                    if (width >= textWidth) {
                        context.fillStyle = "#000000";
                        context.fillText(
                            newBands.name,
                            centerX,
                            yPosition + LABEL_HEIGHT / 2,
                        );
                    } else {
                    }
                });
            }

            function drawFrequencyMarkers(
                context,
                scale,
                viewportStart,
                viewportEnd,
            ) {
                const tier = getZoomTier(scale);
                const config = tier.frequency;
                const baselineY = getBaselineY();

                viewportStart = Math.max(0, Math.min(8000, viewportStart));
                viewportEnd = Math.max(0, Math.min(8000, viewportEnd));

                const startFreq =
                    Math.floor(viewportStart / config.step) * config.step;
                const endFreq =
                    Math.ceil(viewportEnd / config.step) * config.step;

                context.beginPath();
                context.strokeStyle = "#000000";
                context.fillStyle = "#000000";
                context.textAlign = "center";

                for (
                    let freq = startFreq;
                    freq <= endFreq;
                    freq += config.step
                ) {
                    if (freq >= 0 && freq <= 8000) {
                        const x = mhzToScreenX(freq);

                        // Draw tick mark
                        context.moveTo(x, baselineY);
                        context.lineTo(x, baselineY + 10);

                        // Draw frequency label using the label system
                        const label = config.showAsGHz
                            ? `${(freq / 1000).toFixed(config.ghzDecimals)} GHz`
                            : `${freq} MHz`;

                        // Draw the marker labels
                        const freqMarkerY = baselineY + 20; // Apply 20px offset to label
                        context.fillStyle = "#000000";
                        context.fillText(label, x, freqMarkerY);

                        // Draw minor ticks
                        for (
                            let minorFreq = freq + config.minorSteps;
                            minorFreq < freq + config.step && minorFreq <= 8000;
                            minorFreq += config.minorSteps
                        ) {
                            if (minorFreq >= 0) {
                                const minorX = mhzToScreenX(minorFreq);
                                context.moveTo(minorX, baselineY);
                                context.lineTo(minorX, baselineY + 5);
                            }
                        }
                    }
                }
                context.stroke();
            }

            function drawWiFiChannel(channel, scale, widthForID) {
                const centerX = mhzToScreenX(channel.frequency);
                const centerY = getBaselineY();
                const width = channel.width * 2 * scale;
                const height = chartSettings.spectralMaskHeight;

                // Use parabola for DSSS channels, ziggurat for others
                if (channel.dsss) {
                    drawParabola(
                        centerX,
                        centerY,
                        width,
                        height,
                        style.wifi.primaryColor,
                        style.wifi.secondaryColor,
                    );
                } else {
                    drawZiggurat(
                        centerX,
                        centerY,
                        width,
                        height,
                        style.wifi.primaryColor,
                        style.wifi.secondaryColor,
                    );
                }

                // Draw subcarriers
                if (
                    show20MHzSubcarriers &&
                    scale >= 12 &&
                    !channel.dsss &&
                    channel.width == 20
                ) {
                    const subCarrierCount = 26;
                    const subCarrierWidth = 0.312; // This should be both width and spacing
                    const channelStart = centerX; // Start from the center of the channel and go right
                    let currentSubCarrierX = centerX; // Track the current subcarrier position

                    // Draw right half (starting from center working right)
                    for (let i = 1; i <= subCarrierCount; i++) {
                        if (i > 1) {
                            // Skip the null subcarrier in the center
                            drawParabola(
                                currentSubCarrierX,
                                centerY,
                                subCarrierWidth * 2 * scale,
                                height - 2,
                                style.wifi.primaryColor,
                                style.wifi.secondaryColor,
                            );
                        }
                        currentSubCarrierX =
                            currentSubCarrierX + subCarrierWidth * 2 * scale;
                    }

                    // Draw left half (starting from center working left)
                    currentSubCarrierX = centerX;
                    for (let i = 1; i <= subCarrierCount; i++) {
                        if (i > 1) {
                            // Skip the null subcarrier in the center
                            drawParabola(
                                currentSubCarrierX,
                                centerY,
                                subCarrierWidth * 2 * scale,
                                height - 2,
                                style.wifi.primaryColor,
                                style.wifi.secondaryColor,
                            );
                        }
                        currentSubCarrierX -= subCarrierWidth * 2 * scale;
                    }
                }

                // Create the rowData object
                const rowData = {
                    id: "wi-fi",
                    type: widthForID,
                };

                drawChannelLabel(
                    centerX,
                    centerY,
                    width,
                    style.wifi.primaryColor,
                    style.wifi.textColor,
                    channel.channel,
                );
            }

            function drawZigbeeChannel(channel, scale) {
                const centerX = mhzToScreenX(channel.frequency);
                const centerY = getBaselineY();
                const width = channel.width * 2 * scale;
                const height = chartSettings.spectralMaskHeight;

                drawParabola(
                    centerX,
                    centerY,
                    width,
                    height,
                    style.zigbee.primaryColor,
                    style.zigbee.secondaryColor,
                );

                const rowData = {
                    id: "zigbee",
                    type: "zigbee",
                };

                drawChannelLabel(
                    centerX,
                    centerY,
                    width,
                    style.zigbee.primaryColor,
                    style.zigbee.textColor,
                    channel.channel,
                );
            }

            function drawLoRaChannel(channel, scale, widthForID) {
                const centerX = mhzToScreenX(channel.frequency);
                const centerY = getBaselineY();
                const width = channel.width * 2 * scale;
                const height = chartSettings.spectralMaskHeight;

                drawParabola(
                    centerX,
                    centerY,
                    width,
                    height,
                    style.lora.primaryColor,
                    style.lora.secondaryColor,
                );

                const rowData = {
                    id: "lora",
                    type: widthForID,
                };

                drawChannelLabel(
                    centerX,
                    centerY,
                    width,
                    style.lora.primaryColor,
                    style.lora.textColor,
                    channel.channel,
                );
            }

            function drawBluetoothChannel(channel, scale) {
                const centerX = mhzToScreenX(channel.frequency);
                const centerY = getBaselineY();
                const width = channel.width * 2 * scale;
                const height = chartSettings.spectralMaskHeight;

                drawParabola(
                    centerX,
                    centerY,
                    width,
                    height,
                    style.bluetooth.primaryColor,
                    style.bluetooth.secondaryColor,
                );

                const rowData = {
                    id: "bluetooth",
                    type: "bluetooth",
                };

                let technology = "bluetooth";

                drawChannelLabel(
                    centerX,
                    centerY,
                    width,
                    style.bluetooth.primaryColor,
                    style.bluetooth.textColor,
                    channel.channel,
                    technology,
                );
            }

            function drawZiggurat(
                centerX,
                centerY,
                width,
                height,
                lineColor,
                fillColor,
            ) {
                const channelWidthMhz = width / (2 * scale);
                let mhzInset;

                // Use more perpendicular (steeper) lines for narrow channels
                if (channelWidthMhz <= 16) {
                    mhzInset = 0.25;
                } else {
                    mhzInset = 2.1;
                }

                const insetPixels = mhzInset * 2 * scale;
                const lowerFreqX = centerX - width / 2 + insetPixels;
                const upperFreqX = centerX + width / 2 - insetPixels;
                const topY = centerY - height;

                // Draw fill first
                context.beginPath();
                context.moveTo(centerX - width / 2, centerY); // Full channel start
                context.lineTo(lowerFreqX, topY); // Inset start
                context.lineTo(upperFreqX, topY); // Inset end
                context.lineTo(centerX + width / 2, centerY); // Full channel end
                context.fillStyle = fillColor;
                context.fill();

                // Draw outline (without bottom line)
                context.beginPath();
                context.strokeStyle = lineColor;
                context.moveTo(lowerFreqX, topY);
                context.lineTo(centerX - width / 2, centerY);
                context.moveTo(upperFreqX, topY);
                context.lineTo(centerX + width / 2, centerY);
                context.moveTo(lowerFreqX, topY);
                context.lineTo(upperFreqX, topY);
                context.stroke();
            }

            function drawParabola(
                centerX,
                centerY,
                width,
                height,
                lineColor,
                fillColor,
            ) {
                const points = 20;

                // Draw fill first
                context.beginPath();
                context.moveTo(centerX - width / 2, centerY); // Start at bottom left

                // Draw parabola points
                for (let i = 0; i <= points; i++) {
                    const x = (i / points) * width - width / 2;
                    const y = height * (1 - Math.pow((2 * x) / width, 2));
                    context.lineTo(centerX + x, centerY - y);
                }

                context.lineTo(centerX + width / 2, centerY); // To bottom right
                context.fillStyle = fillColor;
                context.fill();

                // Draw outline (without bottom line)
                context.beginPath();
                context.strokeStyle = lineColor;
                // Draw parabola curve only
                for (let i = 0; i <= points; i++) {
                    const x = (i / points) * width - width / 2;
                    const y = height * (1 - Math.pow((2 * x) / width, 2));
                    if (i === 0) {
                        context.moveTo(centerX + x, centerY - y);
                    } else {
                        context.lineTo(centerX + x, centerY - y);
                    }
                }
                context.stroke();
            }

            // Helper function for coordinate conversion
            function mhzToScreenX(mhz) {
                const pixelsPerMhz = 2 * scale;
                return mhz * pixelsPerMhz + offset.x;
            }

            // Helper function for coordinate conversion
            function screenXToMhz(screenX) {
                const pixelsPerMhz = 2 * scale;
                const freq = (screenX - offset.x) / pixelsPerMhz;
                return Math.max(0, Math.min(8000, freq));
            }

            // Check if a new channel label overlaps with existing ones
            function findRowForChannelLabel(labelStart, labelWidth) {
                const labelEnd = labelStart + labelWidth;
                let row = 0;

                // Keep checking rows until we find one where the label fits
                while (true) {
                    // Get all labels in current row
                    const labelsInRow = channelLabelPositions.filter(
                        (label) => label.row === row,
                    );

                    // Check if label overlaps with any existing labels in this row
                    const hasOverlap = labelsInRow.some(
                        (existingLabel) =>
                            !(
                                labelEnd < existingLabel.start ||
                                labelStart > existingLabel.end
                            ),
                    );

                    if (!hasOverlap) {
                        // Found a row where the label fits! Add it to our positions
                        channelLabelPositions.push({
                            row,
                            start: labelStart,
                            end: labelEnd,
                        });
                        return row;
                    }

                    // Try next row
                    row++;
                }
            }

            // Check if a new band label overlaps with existing ones
            function findRowForBandLabel(labelStart, labelEnd) {
                let row = 0;

                // Keep checking rows until we find one where the label fits
                while (true) {
                    // Get all labels in current row
                    const labelsInRow = bandLabelPositions.filter(
                        (label) => label.row === row,
                    );

                    // Check if label overlaps with any existing labels in this row
                    const hasOverlap = labelsInRow.some(
                        (existingLabel) =>
                            !(
                                labelEnd < existingLabel.start ||
                                labelStart > existingLabel.end
                            ),
                    );

                    if (!hasOverlap) {
                        // Found a row where the label fits! Add it to our positions
                        bandLabelPositions.push({
                            row,
                            start: labelStart,
                            end: labelEnd,
                        });
                        return row;
                    }

                    // Try next row
                    row++;
                }
            }

            function drawChannelLabel(
                centerX,
                centerY,
                width,
                backgroundColor,
                foregroundColor,
                text,
                technology,
            ) {
                // If the label is too narrow, don't draw it
                if (width < 4) return;

                // Calculate label position
                const labelStart = centerX - width / 2;

                // Find which row this label should go in
                const row = findRowForChannelLabel(labelStart, width - 4);

                // Calculate vertical offset based on row
                const offset = BASE_OFFSET - row * ROW_HEIGHT;

                // Draw the label
                const height = 30;
                centerY = centerY - offset;

                context.beginPath();
                context.roundRect(
                    centerX - width / 2,
                    centerY - height / 2,
                    width - 2,
                    LABEL_HEIGHT,
                    6,
                );
                context.fillStyle = backgroundColor;
                context.fill();

                // Stop-gap, temporary fix
                context.font = "14px Quicksand";
                context.textAlign = "center";
                context.textBaseline = "middle";

                // Draw text if it fits
                const textWidth = context.measureText(text).width + 4;
                if (width >= textWidth) {
                    context.fillStyle = foregroundColor;
                    context.fillText(text, centerX, centerY);
                }
            }

            function draw() {
                // Clear the canvas and label positions
                context.clearRect(0, 0, canvas.width, canvas.height);

                channelLabelPositions.length = 0;
                bandLabelPositions.length = 0;

                // Draw WiFi channels
                if (showWifi) {
                    ["900 MHz", "2.4 GHz", "5 GHz", "6 GHz"].forEach((band) => {
                        wifiChannels[band].forEach((channel) => {
                            // Filter overlapping channels in 2.4 GHz
                            if (
                                band === "2.4 GHz" &&
                                channel.overlapping &&
                                !showOverlapping
                            ) {
                                return;
                            }

                            // Filter by channel width
                            if (
                                (channel.width === 1 && !show1MHz) ||
                                (channel.width === 2 && !show2MHz) ||
                                (channel.width === 4 && !show4MHz) ||
                                (channel.width === 8 && !show8MHz) ||
                                (channel.width === 16 && !show16MHz) ||
                                (channel.width === 20 && !show20MHz) ||
                                (channel.width === 40 && !show40MHz) ||
                                (channel.width === 80 && !show80MHz) ||
                                (channel.width === 160 && !show160MHz) ||
                                (channel.width === 320 && !show320MHz)
                            ) {
                                return;
                            }

                            // First verify that channel and domain exist
                            if (!channel || !channel.domain) {
                                console.warn(
                                    `Found channel without domain in band ${band}:`,
                                    channel,
                                );
                                return;
                            }

                            // Show if channel is worldwide
                            if (channel.domain.includes("WW") && showWWDomain) {
                                drawWiFiChannel(channel, scale, channel.width);
                                return;
                            }

                            if (channel.domain.includes("US") && showUSDomain) {
                                drawWiFiChannel(channel, scale, channel.width);
                                return;
                            }

                            if (channel.domain.includes("EU") && showEUDomain) {
                                drawWiFiChannel(channel, scale, channel.width);
                                return;
                            }

                            if (channel.domain.includes("JP") && showJPDomain) {
                                drawWiFiChannel(channel, scale, channel.width);
                                return;
                            }

                            if (channel.domain.includes("AU") && showAUDomain) {
                                drawWiFiChannel(channel, scale, channel.width);
                                return;
                            }
                        });
                    });
                }

                // Draw Bluetooth channels
                if (showBluetooth) {
                    bluetoothChannels[bluetoothMode].forEach((channel) => {
                        drawBluetoothChannel(channel, scale);
                    });
                }

                // Draw Zigbee channels
                if (showZigbee) {
                    Object.keys(zigbeeChannels).forEach((band) => {
                        zigbeeChannels[band].forEach((channel) => {
                            // Show if channel is worldwide
                            if (channel.domain.includes("WW") && showWWDomain) {
                                drawZigbeeChannel(channel, scale);
                                return;
                            }

                            // Filter regulatory domains
                            if (
                                (channel.domain.includes("US") &&
                                    !showUSDomain) ||
                                (channel.domain.includes("EU") && !showEUDomain)
                            ) {
                                return;
                            }

                            drawZigbeeChannel(channel, scale);
                        });
                    });
                }

                if (showLoRa) {
                    Object.keys(loRaChannels).forEach((band) => {
                        loRaChannels[band].forEach((channel) => {
                            // Filter by channel width
                            if (
                                (channel.width === 0.125 && !showLoRa125) ||
                                (channel.width === 0.5 && !showLoRa500)
                            ) {
                                return;
                            }

                            // Show if channel is worldwide
                            if (channel.domain.includes("WW") && showWWDomain) {
                                drawZigbeeChannel(channel, scale);
                                return;
                            }

                            // Filter regulatory domains
                            if (
                                (channel.domain.includes("US") &&
                                    !showUSDomain) ||
                                (channel.domain.includes("EU") && !showEUDomain)
                            ) {
                                return;
                            }

                            drawLoRaChannel(channel, scale, channel.width);
                        });
                    });
                }

                // Draw band labels
                Object.keys(bands).forEach((bandType) => {
                    bands[bandType].forEach((band) => {
                        // Filter by band type
                        if (bandType == "FCC" && !showBandFCC) {
                            return;
                        }

                        if (bandType == "ETSI" && !showBandETSI) {
                            return;
                        }

                        if (
                            bandType == "GSM Cellular" &&
                            !showBandCellularGSM
                        ) {
                            return;
                        }

                        if (
                            bandType == "5G NR Cellular" &&
                            !showBandCellular5GNR
                        ) {
                            return;
                        }

                        if (
                            bandType == "LTE Cellular" &&
                            !showBandCellularLTE
                        ) {
                            return;
                        }

                        const startX = mhzToScreenX(band.start);
                        const stopX = mhzToScreenX(band.stop);

                        const width = stopX - startX - 4;
                        if (width < 4) return;
                        const centerX = startX + width / 2;

                        // Find which row this label should go in
                        const row = findRowForBandLabel(startX + 2, stopX - 2);

                        // Calculate vertical offset based on row
                        const centerY =
                            getBaselineY() -
                            chartSettings.spectralMaskHeight -
                            BAND_LABEL_OFFSET -
                            row * ROW_HEIGHT;

                        // Move this into drawBandLabel()?
                        // Draw rectangle
                        context.beginPath();
                        context.roundRect(
                            startX,
                            centerY,
                            width,
                            LABEL_HEIGHT,
                            6,
                        );
                        context.fillStyle = "#F2F2F2";
                        context.fill();

                        // Calculate the text width and add padding
                        const textWidth =
                            context.measureText(band.name).width + 4;

                        if (width >= textWidth) {
                            context.fillStyle = "#000000";
                            context.fillText(
                                band.name,
                                centerX,
                                centerY + LABEL_HEIGHT / 2,
                            );
                        } else {
                        }
                    });
                });

                // Draw baseline
                const baselineY = getBaselineY();
                context.beginPath();
                const startX = mhzToScreenX(0);
                const endX = mhzToScreenX(8000);
                context.moveTo(startX, baselineY);
                context.lineTo(endX, baselineY);
                context.strokeStyle = "black";
                context.lineWidth = 2;
                context.stroke();

                // Draw frequency markers
                drawFrequencyMarkers(
                    context,
                    scale,
                    screenXToMhz(0),
                    screenXToMhz(canvas.width),
                );

                requestAnimationFrame(draw);
            }

            // Mouse events for panning
            canvas.addEventListener("mousedown", (e) => {
                isDragging = true;
                lastPosition = { x: e.clientX, y: e.clientY };
            });

            canvas.addEventListener("mousemove", (e) => {
                if (isDragging) {
                    offset.x += e.clientX - lastPosition.x;
                    lastPosition.x = e.clientX;
                }
            });

            canvas.addEventListener("mouseup", () => {
                isDragging = false;
            });

            canvas.addEventListener("mouseleave", () => {
                isDragging = false;
            });

            // Touch events for panning and pinch zooming
            canvas.addEventListener("touchstart", (e) => {
                isCoasting = false;
                velocity = 0;

                if (e.touches.length === 1) {
                    isDragging = true;
                    lastPosition = {
                        x: e.touches[0].clientX,
                        y: e.touches[0].clientY,
                    };
                    lastTimestamp = Date.now();
                }
            });

            // Touch input handler
            canvas.addEventListener("touchmove", (e) => {
                // Track velocity
                const currentTimestamp = Date.now();

                if (e.touches.length === 2) {
                    // Handle pinch zooming
                    const touch1 = e.touches[0];
                    const touch2 = e.touches[1];

                    // Calculate center of pinch in screen coordinates
                    const pinchCenterX = (touch1.clientX + touch2.clientX) / 2;

                    // Calculate current pinch distance
                    const currentDistance = Math.hypot(
                        touch2.clientX - touch1.clientX,
                        touch2.clientY - touch1.clientY,
                    );

                    if (lastPinchDistance) {
                        // Calculate scale change
                        const scaleChange = currentDistance / lastPinchDistance;
                        const oldScale = scale;

                        // Store the frequency at pinch center before scaling
                        const freqAtPinch = screenXToMhz(pinchCenterX);

                        // Update scale
                        scale *= scaleChange;
                        scale = Math.min(Math.max(minZoom, scale), maxZoom);

                        // Calculate the new x position for the same frequency after scaling
                        const newPinchX = mhzToScreenX(freqAtPinch);

                        // Adjust offset to maintain pinch center
                        offset.x += pinchCenterX - newPinchX;
                    }

                    lastPinchDistance = currentDistance;
                    e.preventDefault();
                } else if (e.touches.length === 1 && isDragging) {
                    const deltaX = e.touches[0].clientX - lastPosition.x;
                    const deltaTime = currentTimestamp - lastTimestamp;

                    if (deltaTime > 0) {
                        // Update velocity (pixels per millisecond)
                        velocity = deltaX / deltaTime;
                    }

                    offset.x += deltaX;
                    lastPosition.x = e.touches[0].clientX;
                    e.preventDefault();
                }

                lastTimestamp = currentTimestamp;
            });

            // Add a touch end handler to initiate coasting
            canvas.addEventListener("touchend", (e) => {
                isDragging = false;
                lastPinchDistance = null;

                // Only start coasting if there is significant velocity
                if (Math.abs(velocity) > 0.1) {
                    isCoasting = true;
                    coastingAnimation();
                }
            });

            function coastingAnimation() {
                if (!isCoasting) return;

                // Apply friction
                const friction = 0.97; // Closer to 1 means more coasting
                velocity *= friction;

                // Update offset based on velocity
                offset.x += velocity * 16; // Assuming 60 fps (16ms per frame)

                // Stop coasting when velocity is very low
                if (Math.abs(velocity) < 0.01) {
                    isCoasting = false;
                    return;
                }

                requestAnimationFrame(coastingAnimation);
            }

            // Mouse wheel zooming
            canvas.addEventListener("wheel", (e) => {
                e.preventDefault();

                const currentTime = Date.now();

                // Reset direction lock if enough time has passed
                if (currentTime - lastWheelTime > wheelTimeout) {
                    scrollDirection = null;
                }
                lastWheelTime = currentTime;

                // Determine scroll direction if not already locked
                if (!scrollDirection) {
                    if (
                        Math.abs(e.deltaX) >
                        Math.abs(e.deltaY) * scrollThreshold
                    ) {
                        scrollDirection = "horizontal";
                    } else if (
                        Math.abs(e.deltaY) >
                        Math.abs(e.deltaX) * scrollThreshold
                    ) {
                        scrollDirection = "vertical";
                    } else {
                        // If no clear direction yet, exit early
                        return;
                    }
                }

                // Handle scrolling based on locked direction
                if (scrollDirection === "vertical") {
                    // Zoom logic
                    const rect = canvas.getBoundingClientRect();
                    const mouseX = e.clientX - rect.left;
                    const centerFreq = screenXToMhz(mouseX);

                    // Sensitivity settings
                    const zoomFactor = e.deltaY > 0 ? 0.96 : 1.04;
                    scale = Math.min(
                        Math.max(minZoom, scale * zoomFactor),
                        maxZoom,
                    );

                    const newMouseX = mhzToScreenX(centerFreq);
                    offset.x += mouseX - newMouseX;
                } else if (scrollDirection === "horizontal") {
                    // Pan logic
                    offset.x -= e.deltaX;
                }

                // Output scale information to the console (for testing)
                if (scale !== lastScale) {
                    const tier = getZoomTier(scale);
                    const tierName = Object.keys(zoomTiers).find(
                        (key) => zoomTiers[key] === tier,
                    );

                    if (DEBUG) {
                        console.log(
                            `Scale: ${scale.toFixed(2)}, Tier: ${tierName}`,
                            tier,
                        );
                    }

                    lastScale = scale;
                }
            });

            // Zoom buttons
            document.getElementById("zoom-in").addEventListener("click", () => {
                // Calculate the center point accounting for device pixel ratio
                const canvasCenter = canvas.width / window.devicePixelRatio / 2;
                const centerFreq = screenXToMhz(canvasCenter);

                // Apply zoom
                scale *= 1.2;
                scale = Math.min(Math.max(minZoom, scale), maxZoom);

                // Recalculate center position after zoom
                const newCenterX = mhzToScreenX(centerFreq);

                // Adjust offset to maintain center point
                offset.x += canvasCenter - newCenterX;
            });

            document
                .getElementById("zoom-out")
                .addEventListener("click", () => {
                    // Calculate the center point accounting for device pixel ratio
                    const canvasCenter =
                        canvas.width / window.devicePixelRatio / 2;
                    const centerFreq = screenXToMhz(canvasCenter);

                    // Apply zoom
                    scale *= 0.8;
                    scale = Math.min(Math.max(minZoom, scale), maxZoom);

                    // Recalculate center position after zoom
                    const newCenterX = mhzToScreenX(centerFreq);

                    // Adjust offset to maintain center point
                    offset.x += canvasCenter - newCenterX;
                });

            // Menu handler
            document.addEventListener("DOMContentLoaded", () => {
                const buttons = document.querySelectorAll(".dropdown-button");
                const menus = document.querySelectorAll(".dropdown-menu");

                // Handle each button
                buttons.forEach((button) => {
                    button.addEventListener("click", (e) => {
                        const menu =
                            button.nextElementSibling.classList.contains(
                                "dropdown-menu",
                            )
                                ? button.nextElementSibling
                                : button.querySelector(".dropdown-menu");

                        menu.style.display =
                            menu.style.display === "block" ? "none" : "block";

                        // Close other menus
                        menus.forEach((otherMenu) => {
                            if (otherMenu !== menu) {
                                otherMenu.style.display = "none";
                            }
                        });

                        e.stopPropagation();
                    });
                });

                // Close all menus when clicking outside
                document.addEventListener("click", () => {
                    menus.forEach((menu) => {
                        menu.style.display = "none";
                    });
                });

                // Prevent clicks inside any menu from closing it
                menus.forEach((menu) => {
                    menu.addEventListener("click", (e) => {
                        e.stopPropagation();
                    });
                });
            });

            // Wi-Fi

            document
                .getElementById("wifi-visibility")
                .addEventListener("change", (e) => {
                    showWifi = e.target.checked;
                });

            document
                .getElementById("wifi-overlapping-visibility")
                .addEventListener("change", (e) => {
                    showOverlapping = e.target.checked;
                });

            document
                .getElementById("20-mhz-subcarrier-visibility")
                .addEventListener("change", (e) => {
                    show20MHzSubcarriers = e.target.checked;
                });

            // Wi-Fi channel width checkboxes
            document
                .getElementById("wifi-20mhz-visibility")
                .addEventListener("change", (e) => {
                    show20MHz = e.target.checked;
                });

            document
                .getElementById("wifi-40mhz-visibility")
                .addEventListener("change", (e) => {
                    show40MHz = e.target.checked;
                });

            document
                .getElementById("wifi-80mhz-visibility")
                .addEventListener("change", (e) => {
                    show80MHz = e.target.checked;
                });

            document
                .getElementById("wifi-160mhz-visibility")
                .addEventListener("change", (e) => {
                    show160MHz = e.target.checked;
                });

            document
                .getElementById("wifi-320mhz-visibility")
                .addEventListener("change", (e) => {
                    show320MHz = e.target.checked;
                });

            document
                .getElementById("wifi-1mhz-visibility")
                .addEventListener("change", (e) => {
                    show1MHz = e.target.checked;
                });

            document
                .getElementById("wifi-2mhz-visibility")
                .addEventListener("change", (e) => {
                    show2MHz = e.target.checked;
                });

            document
                .getElementById("wifi-4mhz-visibility")
                .addEventListener("change", (e) => {
                    show4MHz = e.target.checked;
                });

            document
                .getElementById("wifi-8mhz-visibility")
                .addEventListener("change", (e) => {
                    show8MHz = e.target.checked;
                });

            document
                .getElementById("wifi-16mhz-visibility")
                .addEventListener("change", (e) => {
                    show16MHz = e.target.checked;
                });

            // Bluetooth

            document
                .getElementById("bluetooth-visibility")
                .addEventListener("change", (e) => {
                    showBluetooth = e.target.checked;
                });

            document
                .querySelectorAll('input[name="bluetooth-mode-select"]')
                .forEach((radio) => {
                    radio.addEventListener("change", (e) => {
                        bluetoothMode = e.target.value;
                    });
                });

            // Zigbee

            document
                .getElementById("zigbee-visibility")
                .addEventListener("change", (e) => {
                    showZigbee = e.target.checked;
                });

            // LoRa
            document
                .getElementById("lora-visibility")
                .addEventListener("change", (e) => {
                    showLoRa = e.target.checked;
                });

            document
                .getElementById("lora-125-visibility")
                .addEventListener("change", (e) => {
                    showLoRa125 = e.target.checked;
                });

            document
                .getElementById("lora-500-visibility")
                .addEventListener("change", (e) => {
                    showLoRa500 = e.target.checked;
                });

            // Frequency Band Labels
            document
                .getElementById("fcc-band-visibility")
                .addEventListener("change", (e) => {
                    showBandFCC = e.target.checked;
                });

            document
                .getElementById("etsi-band-visibility")
                .addEventListener("change", (e) => {
                    showBandETSI = e.target.checked;
                });

            document
                .getElementById("gsm-cellular-band-visibility")
                .addEventListener("change", (e) => {
                    showBandCellularGSM = e.target.checked;
                });

            document
                .getElementById("5G-NR-cellular-band-visibility")
                .addEventListener("change", (e) => {
                    showBandCellular5GNR = e.target.checked;
                });

            document
                .getElementById("LTE-cellular-band-visibility")
                .addEventListener("change", (e) => {
                    showBandCellularLTE = e.target.checked;
                });

            document
                .getElementById("ww-domain-visibility")
                .addEventListener("change", (e) => {
                    showWWDomain = e.target.checked;
                });

            document
                .getElementById("us-domain-visibility")
                .addEventListener("change", (e) => {
                    showUSDomain = e.target.checked;
                });

            document
                .getElementById("eu-domain-visibility")
                .addEventListener("change", (e) => {
                    showEUDomain = e.target.checked;
                });

            document
                .getElementById("au-domain-visibility")
                .addEventListener("change", (e) => {
                    showAUDomain = e.target.checked;
                });

            document
                .getElementById("jp-domain-visibility")
                .addEventListener("change", (e) => {
                    showJPDomain = e.target.checked;
                });

            // Spectral mask height slider

            heightSlider.addEventListener("input", (e) => {
                chartSettings.spectralMaskHeight = parseInt(e.target.value);
            });

            document.getElementById("export").addEventListener("click", () => {
                const canvas = document.getElementById("canvas");
                const context = canvas.getContext("2d");

                // Save the current canvas state
                context.save();

                // Add white background
                const currentCompositeOperation =
                    context.globalCompositeOperation;
                context.globalCompositeOperation = "destination-over";
                context.fillStyle = "white";
                context.fillRect(0, 0, canvas.width, canvas.height);

                // Convert to data URL
                const dataUrl = canvas.toDataURL("image/png");

                // Restore the canvas state (removes the white background)
                context.globalCompositeOperation = currentCompositeOperation;
                context.restore();

                // Create and trigger download
                const link = document.createElement("a");
                link.download = "canvas-drawing.png";
                link.href = dataUrl;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            });

            document
                .getElementById("900-MHz-shortcut")
                .addEventListener("click", (e) => {
                    setViewportFrequencyRange(900, 930);
                });

            document
                .getElementById("2400-MHz-shortcut")
                .addEventListener("click", (e) => {
                    setViewportFrequencyRange(2395, 2505);
                });

            document
                .getElementById("5000-MHz-shortcut")
                .addEventListener("click", (e) => {
                    setViewportFrequencyRange(5160, 5845);
                });

            document
                .getElementById("6000-MHz-shortcut")
                .addEventListener("click", (e) => {
                    setViewportFrequencyRange(5930, 7140);
                });

            document
                .getElementById("full-spectrum-shortcut")
                .addEventListener("click", (e) => {
                    setViewportFrequencyRange(-200, 8200);
                });

            let lastTapTime = 0;
            let doubleTapZooming = false;
            let doubleTapStartY = 0;
            let initialScale = 0;
            let zoomCenterX = 0;

            canvas.addEventListener("touchstart", (e) => {
                const currentTime = Date.now();
                const tapDelay = currentTime - lastTapTime;

                if (tapDelay < 300) {
                    // Double tap detected
                    e.preventDefault();

                    // Store initial touch position and current scale
                    doubleTapStartY = e.touches[0].clientY;
                    initialScale = scale;
                    doubleTapZooming = true;

                    // Store the frequency at the touch point
                    const touchX = e.touches[0].clientX;
                    zoomCenterX = touchX;

                    // Prevent panning
                    isDragging = false;
                }

                lastTapTime = currentTime;
            });

            canvas.addEventListener("touchmove", (e) => {
                if (doubleTapZooming) {
                    e.preventDefault();

                    // Calculate vertical distance moved
                    const deltaY = doubleTapStartY - e.touches[0].clientY;

                    // Make zoom behavior more linear
                    let zoomFactor;
                    if (deltaY > 0) {
                        zoomFactor = 1 * (1 + Math.abs(deltaY) / 40);
                    } else {
                        // Zooming out - use linear reduction
                        zoomFactor = 1 / (1 + Math.abs(deltaY) / 40);
                    }

                    // Store the frequency at zoom center before scaling
                    const freqAtZoom = screenXToMhz(zoomCenterX);

                    // Apply zoom
                    const newScale = Math.min(
                        Math.max(minZoom, initialScale * zoomFactor),
                        maxZoom,
                    );

                    if (newScale !== scale) {
                        scale = newScale;

                        // Calculate the new x position for the same frequency after scaling
                        const newZoomX = mhzToScreenX(freqAtZoom);

                        // Adjust offset to maintain zoom center
                        offset.x += zoomCenterX - newZoomX;
                    }
                }
            });

            canvas.addEventListener("touchend", () => {
                doubleTapZooming = false;
            });

            draw();
        </script>
    </body>
</html>
